name: 주식 리포트 통합 발송 (미국/한국)

on:
  schedule:
    # 한국 시간 기준 오전 7:30 (UTC 22:30)에 매일 실행
    - cron: '30 22 * * *'
  workflow_dispatch: # 수동 실행 버튼 활성화

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: 1. 코드 체크아웃
        uses: actions/checkout@v3

      - name: 2. 파이썬 설치
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'

      - name: 3. 라이브러리 설치
        run: |
          pip install pandas finance-datareader openpyxl python-telegram-bot

      - name: 4. 리포트 생성 및 전송
        # 시간 조건을 따지지 않고 실행될 때마다 두 파일을 모두 실행합니다.
        run: |
          python us_bot.py
          python bot.py
